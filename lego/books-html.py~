import pandas as pd


print('Writing books.txt to HTML... ', end='')


read_in = pd.read_csv('~/blurble/read.txt', sep='|')


read_html = read_in.to_html(
    table_id='readTxt',
    index=False,
    justify='left',
    columns=[
        'title', 'author', 'published', 'read', 'keywords'
    ]
)


with open('head.html', 'r') as f:
    head = f.read()
with open('tail.html', 'r') as f:
    tail = f.read()
with open('read.html', 'w') as f:
    f.write(head)
    f.write(read_html)
    f.write(tail)


queue = pd.read_csv('./read_queue.txt', sep='|')
queue_html = queue.to_html()
with open('read_queue.html', 'w') as f:
    f.write(queue_html)


def txt_to_html(df, output_file, format_col=False):
    df_in = pd.read_csv(df, sep='|')
    # df_in = df_in[['readid', 'format', 'title', 'author', 'published', 'read', 'keywords']]
    # print(df_in.columns.tolist())
    if not format_col:
        df_in = df_in.drop(columns=['format'])

    df_html = df_in.to_html(index=False)

    with open(output_file, 'w') as f:
        f.write(df_html)

#txt_to_html('~/blurble/read.txt', 'read.html', format_col=False)
#txt_to_html('~/blurble/read_queue.txt', 'read_queue.html', format_col=False)

# read = pd.read_csv('./read.txt', sep='|')
# read_out = read[['Title', 'Publication date', 'Author', 'Read']]
# read_html = read_out.to_html(index=False)

# queue = pd.read_csv('./books_queue.txt', sep='|')
# queue_html = queue.to_html(index=False)

# with open('read.html', 'w') as f:
    # f.write(read_html)
# with open('books_queue.html', 'w') as f:
    # f.write(queue_html)

    
print('Done')
